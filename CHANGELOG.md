# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

## 12.2.0 - 2022-12-12

* fix stdin with docker 20.10.17 [Edwin Joassart]

## 12.1.1 - 2022-11-16

* move to flowzone set npm engine to 12 remove resin-ci [Edwin Joassart]

## 12.1.0 - 2022-05-26

* Add support for preloading v3 target state format [pipex]

## 12.0.1 - 2022-05-10

* Update supervisor image regex to include tagged images [Kyle Harding]

## 12.0.0 - 2022-01-27

* Improve types [Thodoris Greasidis]
* Stop relying on the /device-types/v1 endpoints [Thodoris Greasidis]
* Bump TypeScript to v4.5 [Thodoris Greasidis]

<details>
<summary> Bump balena-sdk to v16 [Thodoris Greasidis] </summary>

> ### balena-sdk-16.0.0 - 2021-11-28
> 
> * **BREAKING**: Merge the hostApp model into the OS model [Thodoris Greasidis]
> * **BREAKING** Drop os.getSupportedVersions() method in favor of hostapp.getAvailableOsVersions() [Thodoris Greasidis]
> * os.getMaxSatisfyingVersion: Add optional param to choose OS line type [Thodoris Greasidis]
> * os.getMaxSatisfyingVersion: Include ESR versions [Thodoris Greasidis]
> * os.getMaxSatisfyingVersion: Switch to use hostApps [Thodoris Greasidis]
> * hostapp.getAvailableOsVersions: Add single device type argument overload [Thodoris Greasidis]
> * hostapp.getAllOsVersions: Add single device type argument overload [Thodoris Greasidis]
> * models.hostapp: Add a getAvailableOsVersions() convenience method [Thodoris Greasidis]
> * Support optional extra PineOptions in hostapp.getAllOsVersions() [Thodoris Greasidis]
> * **BREAKING** Include invalidated versions in hostapp.getAllOsVersions() [Thodoris Greasidis]
> * models/application: Add getDirectlyAccessible & getAllDirectlyAccessible [Thodoris Greasidis]
> * application.get: Add 'directly_accessible' convenience filter param [Thodoris Greasidis]
> * application.getAll: Add 'directly_accessible' convenience filter param [Thodoris Greasidis]
> * **BREAKING** Change application.getAll to include public apps [Thodoris Greasidis]
> * **BREAKING** Drop targeting/retrieving apps by name in favor of slugs [Thodoris Greasidis]
> * Bump minimum supported Typescript to v4.5.2 [Thodoris Greasidis]
> * **BREAKING**: Stop actively supporting node 10 [Thodoris Greasidis]
> * **BREAKING** Drop application.getAllWithDeviceServiceDetails() [Thodoris Greasidis]
> * **BREAKING** Change apiKey.getAll() to return all key variants [Thodoris Greasidis]
> * types: Drop is_in_local_mode from the Device model [Thodoris Greasidis]
> * types: Drop user__is_member_of__application in favor of the term form [Thodoris Greasidis]
> * typings: Drop Subscription's discounts__plan_addon property [Thodoris Greasidis]
> * typings: Stop extending the JWTUser type in the User model [Thodoris Greasidis]
> * models/config: Change the BETA device type state to NEW [Thodoris Greasidis]
> * typings: Drop the PineWithSelectOnGet type [Thodoris Greasidis]
> * Remove my_application from the supported resources [Thodoris Greasidis]
> * typings: Properly type some Device properties [Thodoris Greasidis]
> * typings: Drop the DeviceWithImageInstalls type [Thodoris Greasidis]
> 
> ### balena-sdk-15.59.2 - 2021-11-28
> 
> 
> <details>
> <summary> Update balena-request to 11.5.0 [Thodoris Greasidis] </summary>
> 
>> #### balena-request-11.5.0 - 2021-11-28
>> 
>> * Convert tests to JavaScript and drop coffeescript [Thodoris Greasidis]
>> * Fix the jsdoc generation [Thodoris Greasidis]
>> * Convert to typescript and publish typings [Thodoris Greasidis]
>> 
> </details>
> 
> 
> ### balena-sdk-15.59.1 - 2021-11-28
> 
> * Fix the typings of the Image contract field [Thodoris Greasidis]
> * Fix the typings for the Release contract field [Thodoris Greasidis]
> 
> ### balena-sdk-15.59.0 - 2021-11-24
> 
> * Add release setIsInvalidated function [Matthew Yarmolinsky]
> 
> ### balena-sdk-15.58.1 - 2021-11-17
> 
> * Update typescript to 4.5.2 [Thodoris Greasidis]
> 
> ### balena-sdk-15.58.0 - 2021-11-16
> 
> * models/release: Add note() method [Thodoris Greasidis]
> * typings: Add the release.invalidation_reason property [Thodoris Greasidis]
> * typings: Add the release.note property [Thodoris Greasidis]
> 
> ### balena-sdk-15.57.2 - 2021-11-15
> 
> * tests/logs: Increase the wait time for retrieving the subscribed logs [Thodoris Greasidis]
> * tests/logs: Refactor to async-await [Thodoris Greasidis]
> 
> ### balena-sdk-15.57.1 - 2021-11-11
> 
> * typings: Fix $filters for resources with non numeric ids [Thodoris Greasidis]
> * typings: Add application.can_use__application_as_host ReverseNavigation [Thodoris Greasidis]
> * Add missing apiKey.getDeviceApiKeysByDevice docs [Thodoris Greasidis]
> 
> ### balena-sdk-15.57.0 - 2021-11-05
> 
> * models/api-key: Change update() & revoke() to work with all key variants [Thodoris Greasidis]
> 
> ### balena-sdk-15.56.0 - 2021-11-04
> 
> * models/apiKey: Add getDeviceApiKeysByDevice() method [Thodoris Greasidis]
> 
> ### balena-sdk-15.55.0 - 2021-11-01
> 
> * typings: Add the release.raw_version property [Thodoris Greasidis]
> 
> ### balena-sdk-15.54.2 - 2021-10-25
> 
> * application/create: Rely on the hostApps for detecting discontinued DTs [Thodoris Greasidis]
> 
> ### balena-sdk-15.54.1 - 2021-10-22
> 
> * tests/device: Async-await conversions & abstraction on multi-field tests [Thodoris Greasidis]
> 
> ### balena-sdk-15.54.0 - 2021-10-20
> 
> * tests: Register devices in chunks of 10 to avoid uuid conflicts in node [Thodoris Greasidis]
> * Add known issue check on release isReccomanded logic [JSReds]
> * Add known_issue_list to hostApp.getOsVersions() [JSReds]
> 
> ### balena-sdk-15.53.0 - 2021-10-07
> 
> * Add support for batch device supervisor updates [Thodoris Greasidis]
> 
> ### balena-sdk-15.52.0 - 2021-10-06
> 
> * Add support for batch device pinning to release [Thodoris Greasidis]
> 
> ### balena-sdk-15.51.4 - 2021-09-28
> 
> * auth.isLoggedIn: Treat BalenaExpiredToken errors as logged out indicator [Thodoris Greasidis]
> 
> ### balena-sdk-15.51.3 - 2021-09-28
> 
> * Convert application spec to TypeScript [Thodoris Greasidis]
> 
> ### balena-sdk-15.51.2 - 2021-09-28
> 
> * application.trackLatestRelease: Fix using draft/invalidated releases [Thodoris Greasidis]
> * application.isTrackingLatestRelease: Exclude draft&invalidated releases [Thodoris Greasidis]
> 
> ### balena-sdk-15.51.1 - 2021-09-20
> 
> 
> <details>
> <summary> Update balena-request to v11.4.2 [Kyle Harding] </summary>
> 
>> #### balena-request-11.4.2 - 2021-09-20
>> 
>> * Allow overriding the default zlib flush setting [Kyle Harding]
>> 
> </details>
> 
> 
> ### balena-sdk-15.51.0 - 2021-09-16
> 
> * os.getConfig: Add typings for the provisioningKeyName option [Nitish Agarwal]
> 
> ### balena-sdk-15.50.1 - 2021-09-13
> 
> * models/os: Always first normalize the device type slug [Thodoris Greasidis]
> 
> ### balena-sdk-15.50.0 - 2021-09-10
> 
> * Add release.finalize to promote draft releases to final [toochevere]
> 
> ### balena-sdk-15.49.1 - 2021-09-10
> 
> * typings: Drop the v5-model-only application_type.is_host_os [Thodoris Greasidis]
> 
> ### balena-sdk-15.49.0 - 2021-09-06
> 
> * os.getSupportedOsUpdateVersions: Use the hostApp releases [Thodoris Greasidis]
> * os.download: Use the hostApp for finding the latest release [Thodoris Greasidis]
> 
> ### balena-sdk-15.48.3 - 2021-08-27
> 
> 
> <details>
> <summary> Update balena-request to 11.4.1 [Kyle Harding] </summary>
> 
>> #### balena-request-11.4.1 - 2021-08-27
>> 
>> * Allow more lenient gzip decompression [Kyle Harding]
>> 
> </details>
> 
> 
> ### balena-sdk-15.48.2 - 2021-08-27
> 
> * Improve hostapp.getAllOsVersions performance & reduce fetched data [Thodoris Greasidis]
> 
> ### balena-sdk-15.48.1 - 2021-08-27
> 
> * Update typescript to 4.4.2 [Thodoris Greasidis]
> 
> ### balena-sdk-15.48.0 - 2021-08-15
> 
> * Deprecate the release.release_version property [Thodoris Greasidis]
> * typings: Add the release versioning properties [Thodoris Greasidis]
> 
> ### balena-sdk-15.47.1 - 2021-08-10
> 
> * Run browser tests using the minified browser bundle [Thodoris Greasidis]
> * Move to uglify-js to fix const assignment bug in minified build [Thodoris Greasidis]
> 
> ### balena-sdk-15.47.0 - 2021-08-09
> 
> * typings: Add the release.is_final & is_finalized_at__date properties [Thodoris Greasidis]
> 
> ### balena-sdk-15.46.1 - 2021-07-28
> 
> * apiKey.getAll: Return only NamedUserApiKeys for backwards compatibility [Thodoris Greasidis]
> 
> ### balena-sdk-15.46.0 - 2021-07-27
> 
> * Add email verification & email request methods [Nitish Agarwal]
> 
> ### balena-sdk-15.45.0 - 2021-07-26
> 
> * Update generateProvisioningKey to include keyName [Nitish Agarwal]
> 
</details>

## 11.0.0 - 2021-10-13

* Avoid creating multiple preload containers [Kyle Harding]
* major: Remove balena-preload script in favor of use with CLI [Lorenzo Alberto Maria Ambrosi]
* Fix missing 'await' for getEdisonPartitions() [Paulo Castro]
* Add extra type information (refactor bind mount array) [Paulo Castro]
* Run linter [Paulo Castro]
* major: Convert to typescript [Lorenzo Alberto Maria Ambrosi]
* patch: Fix incorrect python List index check [Lorenzo Alberto Maria Ambrosi]

## 10.5.0 - 2021-08-04

* Remove mutually exclusive args from sfdisk [Kyle Harding]
* Explicitly disable tls to avoid startup delays [Kyle Harding]
* Use custom dind image based on alpine [Kyle Harding]

## 10.4.20 - 2021-07-26

* Avoid TypeError if build output array is empty [Kyle Harding]

## 10.4.19 - 2021-07-23

* Start fetching image info sooner and run in parallel with api calls [Pagan Gazzard]

## 10.4.18 - 2021-07-23

* Fix missing await [Pagan Gazzard]

## 10.4.17 - 2021-07-23

* Use class syntax for declaring instance variables [Pagan Gazzard]

## 10.4.16 - 2021-07-22

* Catch errors during build of preload image [Kyle Harding]

## 10.4.15 - 2021-07-22

* Make use of async/await to simplify the code [Pagan Gazzard]

## 10.4.14 - 2021-07-22

* Remove unnecessary fetching of balena settings and token [Pagan Gazzard]

## 10.4.13 - 2021-07-22

* Switch to tmp-promise instead of tmp [Pagan Gazzard]

## 10.4.12 - 2021-07-22

* Prefer `this.appId` to `this.application.id` [Pagan Gazzard]

## 10.4.11 - 2021-07-22

* Update balena-lint to 6.x, typescript to 4.x [Pagan Gazzard]

## 10.4.10 - 2021-07-22

* Support new storage-driver location in balena.service [Kyle Harding]

## 10.4.9 - 2021-06-28

* Fix supervisor repository regex [Alex Gonzalez]

## 10.4.8 - 2021-06-23

* Delay populating global partitions cache until methods call [Kyle Harding]

## 10.4.7 - 2021-05-17

* CI: limit tests to one platform since we are only linting [Kyle Harding]
* Fixup linting by disabling editorconfig for .js files [Kyle Harding]
* Avoid hardcoded registry2 url [Kyle Harding]

## 10.4.6 - 2021-05-06

* Update dependencies (dockerode, docker-progress) [Paulo Castro]
* Don't assume that 'docker' argument uses Bluebird promises [Paulo Castro]

## 10.4.5 - 2021-05-05

* Enhance comms between CLI process and Python process in container [Paulo Castro]

## 10.4.4 - 2021-05-05

* Fix unhandled exception on container.wait() [Paulo Castro]
* Emit error on container status code '137' too (OOM SIGKILL) [Paulo Castro]
* Add flake8 npm script [Paulo Castro]

## 10.4.3 - 2021-05-04

* Don't truncate error logs (add _truncate_exc option to python sh commands) [Paulo Castro]
* Add keyword args to RetryCounter key computation. Remove unused args. [Paulo Castro]

## 10.4.2 - 2021-04-26

* Bump Docker version to 20.10.6 [Kyle Harding]

## 10.4.1 - 2020-12-28

* Store temporary docker pull files in a separate volume [Alexis Svinartchouk]
* Round the additional required bytes [Alexis Svinartchouk]

## 10.4.0 - 2020-09-24

* Add additionalSpace option to override additional space calculation [Alexis Svinartchouk]
* Sum unique layers sizes instead of image sizes for size estimation [Alexis Svinartchouk]

## 10.3.1 - 2020-08-26

* Fix splash image file name for balenaOS >= 2.53.0 (resin -> balena) [Paulo Castro]
* Don't produce (and ignore) a package-lock.json file [Paulo Castro]

## 10.3.0 - 2020-08-17


<details>
<summary> Update docker-progress to 4.x [Pagan Gazzard] </summary>

> ### docker-progress-4.0.3 - 2020-08-17
> 
> * Update to balena-lint 5.x [Pagan Gazzard]
> 
> ### docker-progress-4.0.2 - 2020-08-17
> 
> * Add .versionbot/CHANGELOG.yml for nested changelogs [Pagan Gazzard]
> 
> ### docker-progress-4.0.1 - 2020-03-04
> 
> * Update dependencies [Pagan Gazzard]
> 
> ### docker-progress-4.0.0 - 2019-03-26
> 
> * Detect error events in push/pull progress streams [Paulo Castro]
> 
</details>

## 10.2.4 - 2020-08-10

* Add .versionbot/CHANGELOG.yml for nested changelogs [Pagan Gazzard]

## 10.2.3 - 2020-08-04

* Fix build dir paths [Pagan Gazzard]

## 10.2.2 - 2020-08-04


<details>
<summary> Update balena-sdk to 15.x [Pagan Gazzard] </summary>

> ### balena-sdk-15.2.1 - 2020-08-03
> 
> * Convert majority to async/await [Pagan Gazzard]
> 
> ### balena-sdk-15.2.0 - 2020-07-31
> 
> * device: add method to update target supervisor release [Matthew McGinn]
> 
> ### balena-sdk-15.1.1 - 2020-07-27
> 
> * Deduplicate device update methods [Pagan Gazzard]
> 
> ### balena-sdk-15.1.0 - 2020-07-27
> 
> 
> <details>
> <summary> Update balena-pine to add support for and make use of named keys [Pagan Gazzard] </summary>
> 
>> #### balena-pine-12.2.0 - 2020-07-22
>> 
>> 
>> <details>
>> <summary> Update pinejs-client-core [Pagan Gazzard] </summary>
>> 
>>> ##### pinejs-client-js-6.1.0 - 2020-07-21
>>> 
>>> * Add support for using named ids [Pagan Gazzard]
>>> 
>> </details>
>> 
>> 
>> #### balena-request-11.1.0 - 2020-07-16
>> 
>> * Add lazy loading for most modules [Pagan Gazzard]
>> 
> </details>
> 
> 
> ### balena-sdk-15.0.3 - 2020-07-27
> 
> * typings: Fix the PineWithSelect & related type helpers [Thodoris Greasidis]
> * typings: Use the native TypeScript Omit type helper [Thodoris Greasidis]
> 
> ### balena-sdk-15.0.2 - 2020-07-22
> 
> * Fix code snippet for initializing balena-sdk [Vipul Gupta (@vipulgupta2048)]
> 
> ### balena-sdk-15.0.1 - 2020-07-15
> 
> * Fix SupportTier/includes__SLA typing [Pagan Gazzard]
> 
> ### balena-sdk-15.0.0 - 2020-07-15
> 
> * **BREAKING** Export setSharedOptions & fromSharedOptions separately [Thodoris Greasidis]
> * **BREAKING** Export as an ES6 module [Thodoris Greasidis]
> 
> <details>
> <summary> Update dependencies and switch all returned promises to native promises [Pagan Gazzard] </summary>
> 
>> #### balena-auth-4.0.2 - 2020-07-13
>> 
>> * Add .versionbot/CHANGELOG.yml for nested changelogs [Pagan Gazzard]
>> 
>> #### balena-auth-4.0.1 - 2020-07-03
>> 
>> * Explicitly add tslib dependency [Pagan Gazzard]
>> 
>> #### balena-auth-4.0.0 - 2020-07-02
>> 
>> * Update to balena-settings-storage 6.x [Pagan Gazzard]
>> * Update target to es2015 [Pagan Gazzard]
>> * Switch to native promises [Pagan Gazzard]
>> * Enable strict type checking [Pagan Gazzard]
>> * Specify node 10+ [Pagan Gazzard]
>> 
>> #### balena-auth-3.1.1 - 2020-07-02
>> 
>> * Switch to @balena/lint for linting [Pagan Gazzard]
>> 
>> #### balena-pine-12.1.1 - 2020-07-13
>> 
>> * Add .versionbot/CHANGELOG.yml for nested changelogs [Pagan Gazzard]
>> 
>> #### balena-pine-12.1.0 - 2020-07-06
>> 
>> * Update balena-auth to 4.x and balena-request to 11.x [Pagan Gazzard]
>> 
>> #### balena-pine-12.0.1 - 2020-07-03
>> 
>> * Use typescript import helpers [Pagan Gazzard]
>> 
>> #### balena-pine-12.0.0 - 2020-06-26
>> 
>> * Stop actively supporting node 8 [Thodoris Greasidis]
>> * Convert to async await [Thodoris Greasidis]
>> * Add balenaCI repo.yml [Thodoris Greasidis]
>> * karma.conf.js: Combine declaration & assignment of karmaConfig [Thodoris Greasidis]
>> * Bump @balena/lint to v5 [Thodoris Greasidis]
>> * Drop getPine() in favor of an es6 export of the BalenaPine class [Thodoris Greasidis]
>> * Drop the API_PREFIX property in favor of the apiPrefix [Thodoris Greasidis]
>> * Bump to pinejs-client v6 which requires es2015 & drops Bluebird promises [Thodoris Greasidis]
>> 
>> #### balena-pine-11.2.1 - 2020-06-15
>> 
>> * Convert karma.conf to js [Thodoris Greasidis]
>> * Bump balena-config-karma to v3 [Thodoris Greasidis]
>> 
>> #### balena-register-device-7.1.0 - 2020-07-13
>> 
>> * Switch from randomstring to uuid for generating device uuids [Pagan Gazzard]
>> 
>> #### balena-register-device-7.0.1 - 2020-07-13
>> 
>> * Add .versionbot/CHANGELOG.yml for nested changelogs [Pagan Gazzard]
>> 
>> #### balena-register-device-7.0.0 - 2020-07-06
>> 
>> * Convert to type checked javascript [Pagan Gazzard]
>> * Drop callback interface in favor of promise interface [Pagan Gazzard]
>> * Switch to a named export [Pagan Gazzard]
>> * Convert to typescript [Pagan Gazzard]
>> * Update to typed-error 3.x [Pagan Gazzard]
>> * Switch to returning native promises [Pagan Gazzard]
>> * Update to balena-request 11.x [Pagan Gazzard]
>> * Use typescript import helpers [Pagan Gazzard]
>> 
>> #### balena-register-device-6.1.6 - 2020-05-26
>> 
>> * Export ApiError [Cameron Diver]
>> 
>> #### balena-register-device-6.1.5 - 2020-05-21
>> 
>> * Convert tests to js [Thodoris Greasidis]
>> 
>> #### balena-register-device-6.1.4 - 2020-05-21
>> 
>> * Install typed-error v2 [Cameron Diver]
>> 
>> #### balena-register-device-6.1.3 - 2020-05-20
>> 
>> * Extend API exception to include full response object [Miguel Casqueira]
>> 
>> #### balena-register-device-6.1.2 - 2020-05-20
>> 
>> * Update mocha to fix node v12 deprecation warning [Thodoris Greasidis]
>> 
>> #### balena-request-11.0.4 - 2020-07-14
>> 
>> * Fix body overwriting on nodejs [Pagan Gazzard]
>> 
>> #### balena-request-11.0.3 - 2020-07-13
>> 
>> * Add .versionbot/CHANGELOG.yml for nested changelogs [Pagan Gazzard]
>> 
>> #### balena-request-11.0.2 - 2020-07-06
>> 
>> * Fix tslib dependency [Pagan Gazzard]
>> 
>> #### balena-request-11.0.1 - 2020-07-03
>> 
>> * Fix passing baseUrl to refreshToken if the request uses an absolute url [Pagan Gazzard]
>> 
>> #### balena-request-11.0.0 - 2020-07-03
>> 
>> * Convert to type checked javascript [Pagan Gazzard]
>> * Switch to returning native promises [Pagan Gazzard]
>> * Drop support for nodejs < 10 [Pagan Gazzard]
>> * Update balena-auth to 4.x [Pagan Gazzard]
>> * Remove rindle dependency [Pagan Gazzard]
>> * Update fetch-ponyfill to 6.x [Pagan Gazzard]
>> * Remove proxy tests as global-tunnel-ng only supports nodejs < 10.16.0 [Pagan Gazzard]
>> * Switch to a named export [Pagan Gazzard]
>> * Use typescript import helpers [Pagan Gazzard]
>> * Bump balena-config-karma & convert karma.conf.coffee to js [Thodoris Greasidis]
>> * Change the browser request timeout error to be consistent with node [Thodoris Greasidis]
>> 
> </details>
> 
> * **BREAKING** billing: Make the organization parameter fist & required [Thodoris Greasidis]
> 
> ### balena-sdk-14.8.0 - 2020-07-15
> 
> * DeviceWithServiceDetails: preserve the image_install & gateway_downloads [Thodoris Greasidis]
> * typings: Deprecate DeviceWithImageInstalls in favor of the Device type [Thodoris Greasidis]
> 
> ### balena-sdk-14.7.1 - 2020-07-14
> 
> * Fix is_private typings for device type [Stevche Radevski]
> 
> ### balena-sdk-14.7.0 - 2020-07-14
> 
> * Add an organization parameter to all billing methods [Thodoris Greasidis]
> 
> ### balena-sdk-14.6.0 - 2020-07-13
> 
> * typings: Add ApplicationHostedOnApplication [Thodoris Greasidis]
> * typings Add RecoveryTwoFactor [Thodoris Greasidis]
> 
> ### balena-sdk-14.5.1 - 2020-07-10
> 
> * Tests: remove bluebird usage [Pagan Gazzard]
> 
> ### balena-sdk-14.5.0 - 2020-07-09
> 
> * tests/integration/setup: Convert to TypeScript [Thodoris Greasidis]
> * typings/ImageInstall: Deprecate the image field [Thodoris Greasidis]
> * typings/ImageInstall: Add the `installs__image` field [Thodoris Greasidis]
> * typings: Add typings for the ReleaseImage [Thodoris Greasidis]
> * typings/ImageInstall: Add the missing device property [Thodoris Greasidis]
> * Convert all remaining tests away from coffeescript [Pagan Gazzard]
> 
> ### balena-sdk-14.4.2 - 2020-07-09
> 
> * Tests: improve typing for access to private SDK os methods [Pagan Gazzard]
> * Tests: improve typing of tag helpers [Pagan Gazzard]
> * Tests: import BalenaSDK types directly [Pagan Gazzard]
> 
> ### balena-sdk-14.4.1 - 2020-07-08
> 
> * Tests: merge multiple application deletions into a single call [Pagan Gazzard]
> 
> ### balena-sdk-14.4.0 - 2020-07-08
> 
> * Improve typings for `sdk.pine.post` [Pagan Gazzard]
> * Improve typings for `sdk.request` [Pagan Gazzard]
> * Improve typings for `models.device.getOsVersion` [Pagan Gazzard]
> * Improve typings for `models.device.lastOnline` [Pagan Gazzard]
> * Fix typings for `models.device.getMACAddresses` [Pagan Gazzard]
> * Fix typings for `models.device.getLocalIPAddresses` [Pagan Gazzard]
> * Add typings for `models.application.getDashboardUrl` [Pagan Gazzard]
> * Device model: last_connectivity_event and os_version can be null [Pagan Gazzard]
> * Improve typings for `models.device.getLocalModeSupport` [Pagan Gazzard]
> 
> ### balena-sdk-14.3.3 - 2020-07-07
> 
> * Minimize bluebird sugar usage [Pagan Gazzard]
> 
> ### balena-sdk-14.3.2 - 2020-07-07
> 
> * Add type checking for tests [Pagan Gazzard]
> 
> ### balena-sdk-14.3.1 - 2020-07-07
> 
> * Tests: cache device type lookup [Pagan Gazzard]
> 
> ### balena-sdk-14.3.0 - 2020-07-07
> 
> * typings: Export pine variant w/ a mandatory $select on get requests [Thodoris Greasidis]
> 
> ### balena-sdk-14.2.9 - 2020-07-07
> 
> * Remove `this.skip` usage as a faster workaround to afterEach skipping [Pagan Gazzard]
> 
> ### balena-sdk-14.2.8 - 2020-07-06
> 
> * Improve internal typings by avoiding some `any` cases [Pagan Gazzard]
> 
> ### balena-sdk-14.2.7 - 2020-07-06
> 
> * Include typings for all lazy loaded requires [Pagan Gazzard]
> 
> ### balena-sdk-14.2.6 - 2020-07-06
> 
> * Simplify balena-request custom typings [Pagan Gazzard]
> * Use import type for declaration imports [Pagan Gazzard]
> * Simplify balena-pine custom typings [Pagan Gazzard]
> * Import balena-sdk type declarations via import type and not direct path [Pagan Gazzard]
> 
> ### balena-sdk-14.2.5 - 2020-07-06
> 
> * Use typescript import helpers [Pagan Gazzard]
> 
> ### balena-sdk-14.2.4 - 2020-07-03
> 
> * Drop dtslint in favor of plain @ts-expect-error [Thodoris Greasidis]
> * Enable strict checks for the typing tests [Thodoris Greasidis]
> 
> ### balena-sdk-14.2.3 - 2020-07-03
> 
> * Standardize bluebird naming as `Bluebird` [Pagan Gazzard]
> 
> ### balena-sdk-14.2.2 - 2020-07-03
> 
> * Avoid $ExpectType b/c of issues with TS 3.9.6 [Thodoris Greasidis]
> 
> ### balena-sdk-14.2.1 - 2020-07-01
> 
> * model: Add build_environment_variable [Rich Bayliss]
> 
> ### balena-sdk-14.2.0 - 2020-07-01
> 
> * Add typings for plans & subscriptions [Thodoris Greasidis]
> 
> ### balena-sdk-14.1.0 - 2020-06-29
> 
> * Generate optional build for es2018 as well as the default es2015 [Pagan Gazzard]
> 
> ### balena-sdk-14.0.2 - 2020-06-28
> 
> * typings: Split the DeviceState namespace types to a different file [Thodoris Greasidis]
> * typings: Split the DeviceTypeJson namespace types to a different file [Thodoris Greasidis]
> * typings: Split the SBVR model types to a different file [Thodoris Greasidis]
> 
> ### balena-sdk-14.0.1 - 2020-06-15
> 
> * appveyor: Increase the node space size [Thodoris Greasidis]
> * Bump balena-config-karma to v3 [Thodoris Greasidis]
> 
</details>

# v10.2.1
## (2020-08-04)

* Use @balena/lint for linting [Pagan Gazzard]
* Add type checking [Pagan Gazzard]

# v10.2.0
## (2020-07-15)

* Add 'setAppIdAndCommit()' method to help decouple balena-cli and balena-preload [Paulo Castro]
* Increase losetup retry delay and count and print hint message on error [Paulo Castro]
* Print full stderr in the event of failure executing dockerd [Paulo Castro]

# v10.1.1
## (2020-07-10)

* Flake8 on src/preload.py [Alexis Svinartchouk]

# v10.1.0
## (2020-07-08)

* Add balena-sdk as a peer dependency since DI is also supported [Thodoris Greasidis]
* Make the balena-sdk instance an optional parameter [Thodoris Greasidis]

# v10.0.0
## (2020-07-01)

* Update to balena-sdk 14.x [Thodoris Greasidis]

# v9.0.0
## (2020-06-30)

* Update to balena-sdk 13.x [Pagan Gazzard]

## 8.4.0 - 2020-03-04

* Update dependencies [Pagan Gazzard]

## 8.3.1 - 2020-02-05

* Check os/app architecture compatibility rather than equvalence. [Scott Lowe]
* Update .gitignore [Scott Lowe]

## 8.3.0 - 2020-01-24

* Update dependencies [Pagan Gazzard]

## 8.2.2 - 2019-12-17

* Upgrade docker version to 17.12.0-ce [Theodor Gherzan]

## 8.2.1 - 2019-07-18

* Fix certificates path in the preloader container [Alexis Svinartchouk]

## 8.2.0 - 2019-05-29

* Add --add-certificate option [Alexis Svinartchouk]
* Stop mounting host's /etc/ssl/certs on Linux [Alexis Svinartchouk]
* Replace tar-stream with tar-fs [Alexis Svinartchouk]

## 8.1.4 - 2019-05-21

* Fetch the app commit if 'latest' is passed [Alexis Svinartchouk]

## 8.1.3 - 2019-05-15

* Use more robust regex to extract supervisor semver [Gergely Imreh]

## 8.1.2 - 2019-05-09

* Filter by commit as part of the query if it's specified [Pagan Gazzard]

## 8.1.1 - 2019-02-18

* Don't write device name in apps.json [Alexis Svinartchouk]

## 8.1.0 - 2019-01-07

* Bind mount host's /etc/ssl/certs folder on Linux [Alexis Svinartchouk]

## 8.0.4 - 2018-11-15

* Don't try to get the device type arch with --dontCheckArch [Alexis Svinartchouk]

## 8.0.3 - 2018-11-13

* The splash image is named resin-logo.png [Alexis Svinartchouk]

## 8.0.2 - 2018-11-13

* Don't try to pin releases when supervisor is < 7.0.0 [Alexis Svinartchouk]

## 8.0.1 - 2018-11-08

* Bind mount host's /dev to container's /dev [Alexis Svinartchouk]

## v8.0.0 - 2018-10-29

* Rename to balena-preload [Alexis Svinartchouk]

## v7.0.6 - 2018-10-29

* Don't build the Dockerfile on CI [Alexis Svinartchouk]

## v7.0.5 - 2018-09-06

* Filter out serviceId for supervisors < 7 [Alexis Svinartchouk]

## v7.0.4 - 2018-08-31

* Get the release ID not the application ID [Theodor Gherzan]

## v7.0.3 - 2018-08-29

* Use localhost instead of 0.0.0.0 to connect to Docker on win32 [Alexis Svinartchouk]

## v7.0.2 - 2018-08-28

* Preload.py: Flush output buffer when data's ready #183 [Gergely Imreh]
* Dockerfile: Do not rely on script being executable #183 [Gergely Imreh]

## v7.0.1 - 2018-08-21

* Pinning information should also be available for the resin-image-flasher #182 [Theodor Gherzan]

## v7.0.0 - 2018-08-20

* Check device architecture instead of device type #181 [Alexis Svinartchouk]

## v6.3.2 - 2018-08-09

* In the case of a flasher OS copy splash image to its boot partition #178 [Theodor Gherzan]

## v6.3.1 - 2018-05-30

* Increase size multiplier from 1.1 to 1.4 #177 [Alexis Svinartchouk]

## v6.3.0 - 2018-05-30

* Add circleci auto-deploy to npm #175 [Cameron Diver]
* Allow devices to be pinned following a preload provision #175 [Cameron Diver]

## v6.2.0 - 2018-03-23

* Update resin-sdk to 9.0.0-beta16, use $ before expand #171 [Alexis Svinartchouk]

## v6.1.2 - 2018-03-20

* Add appId to each app in apps.json for supertvisors < 7 (apps.json is from state v1) #169 [Alexis Svinartchouk]

## v6.1.1 - 2018-03-19

* Fix preloading images with supervisor version < 7 #167 [Alexis Svinartchouk]

## v6.1.0 - 2018-03-19

* Preload the release with the highest id if an app has no commit specified. #165 [Alexis Svinartchouk]
* Use state v1 endpoint when the supervisor version is < 7 #165 [Alexis Svinartchouk]
* Fix specifying commit #165 [Alexis Svinartchouk]

## v6.0.0 - 2018-03-09

* Multicontainer preload #155 [Alexis Svinartchouk]

## v5.2.2 - 2018-02-28

* Get_inner_image_path falls back to the first file in /opt if no deviceType.json file is found. #163 [Alexis Svinartchouk]

## v5.2.1 - 2018-02-22

* Get the inner image name from device_type.json #161 [Alexis Svinartchouk]

## v5.2.0 - 2018-02-06

* Preserve bootstrap code in MBR when resizing #158 [Alexis Svinartchouk]

## v5.1.2 - 2018-01-12

* Bind mount /dev on linux hosts #153 [Alexis Svinartchouk]

## v5.1.1 - 2017-12-12

* Remove all references to --dont-detect-flasher-type-images #151 [Alexis Svinartchouk]
* Minor fixes in preload.py #151 [Alexis Svinartchouk]

## v5.1.0 - 2017-12-12

* Preload images that use Balena instead of Docker #149 [Alexis Svinartchouk]

## v5.0.4 - 2017-11-17

* Wait for loop device to be detached before killing the container #147 [Alexis Svinartchouk]

## v5.0.3 - 2017-11-16

* Fix confusion between bytes and sectors on partition resize #145 [Alexis Svinartchouk]

## v5.0.2 - 2017-11-16

* Fix filesystem expansion after resize #143 [Alexis Svinartchouk]

## v5.0.1 - 2017-11-08

* Update README: docker-toolbox is not supported, aufs module is required. #141 [Alexis Svinartchouk]

## v5.0.0 - 2017-10-26

* Preload GPT disk images, remove --dont-detect-flasher-type-images option #138 [Alexis Svinartchouk]

## v4.0.9 - 2017-10-25

* Don't set Preloader.imageRepo in setApplication. #137 [Alexis Svinartchouk]

## v4.0.8 - 2017-10-24

* Fix incompatibility with Docker 1.12.6 (api version 1.24) #135 [Alexis Svinartchouk]

## v4.0.7 - 2017-10-24

* Fix the --dont-detect-flasher-type-images option. #133 [Alexis Svinartchouk]

## v4.0.6 - 2017-10-20

* Copy data between the MBR and the first partition when resizing a preloader image. #128 [Alexis Svinartchouk]

## v4.0.5 - 2017-10-20

* Don't crash if data/docker/network/files/local-kv.db doesn't exist #130 [Alexis Svinartchouk]

## v4.0.4 - 2017-10-18

* Fix preloading edison images 2.6+ (root partition filename changed) #126 [Alexis Svinartchouk]
* Support preloading 2.6+ resinOS images when hostapps use aufs or overlay2 #126 [Alexis Svinartchouk]
* Print a newline after each spinner #126 [Alexis Svinartchouk]

## v4.0.3 - 2017-10-18

* Fix the logic that defines where we get R_OK and W_OK constants for node 4 support #125 [Pablo Carranza Velez]

## v4.0.2 - 2017-10-16

* Get R_OK and W_OK constants from wherever they're available, to keep supporting node v4 for the time being #124 [Pablo Carranza Velez]

## v4.0.1 - 2017-10-13

* Handle cases where we are not redirected when making a request to the registry. #122 [Alexis Svinartchouk]

## v4.0.0 - 2017-10-13

* Allow preloading of Edison zip archives. #117 [Alexis Svinartchouk]

## v3.1.9 - 2017-10-06

* Don't use Array.includes, it is not supported in node4. #119 [Alexis Svinartchouk]

## v3.1.8 - 2017-09-28

* Use Docker bridged networking on platforms other than Linux. #111 [Alexis Svinartchouk]

## v3.1.7 - 2017-09-05

* Don't use docker's PortBindings as we run it with `--net=host` #108 [Alexis Svinartchouk]

## v3.1.6 - 2017-08-31

* Detect when the overlay module is not loaded and show an appropriate error. #105 [Alexis Svinartchouk]

## v3.1.5 - 2017-08-30

* The python script no longer pulls the build, instead it exposes dockerd to the js script. This allows us to have a progress bar for the docker pull. #102 [Alexis Svinartchouk]

## v3.1.4 - 2017-08-25

* Use the docker storage driver from /<rootfs>/lib/systemd/system/docker.service ExecStart key. #96 [Alexis Svinartchouk]

## v3.1.3 - 2017-08-25

* Fix js style (standard js) #100 [Alexis Svinartchouk]

## v3.1.2 - 2017-08-25

* Add flag for ignoring mismatching device types [Sven Schwermer]

## v3.1.1 - 2017-08-24

* Add a files section to package.json. #99 [Alexis Svinartchouk]

## v3.1.0 - 2017-08-22

* Add progress bars and spinners. #95 [Alexis Svinartchouk]

## v3.0.0 - 2017-08-21

* Don't preload the same build twice. #87 [Alexis Svinartchouk]

## v2.0.3 - 2017-08-21

* Don't call stdin.setRawMode if it doesn't exist. #93 [Alexis Svinartchouk]

## v2.0.2 - 2017-08-18

* Use only lower case for the preloaded image repository. #91 [Alexis Svinartchouk]

## v2.0.1 - 2017-08-16

* Correctly set the resin api token. #85 [Alexis Svinartchouk]

## v2.0.0 - 2017-08-11

* Integrate with resin-cli #81 [Alexis Svinartchouk]

## v1.4.1 - 2017-08-09

* Use --net=host for host's Docker. #83 [Alexis Svinartchouk]

## v1.4.0 - 2017-08-04

* Allow relative paths for the --image parameter. [Alexis Svinartchouk]

## v1.3.1 - 2017-08-04

* Update the README about --dont-detect-flasher-type-images [Alexis Svinartchouk]

## v1.3.0 - 2017-08-04

* Add a --dont-detect-flasher-type-images flag. [Alexis Svinartchouk]

## v1.2.2 - 2017-08-04

* Use standardJS [Alexis Svinartchouk]

## v1.2.1 - 2017-07-27

* Add CHANGELOG to allow VersionBot commits. [Alexis Svinartchouk]

## v1.2.0 - 2017-07-25

* Allow specifying an app commit to preload. [Alexis Svinartchouk]
