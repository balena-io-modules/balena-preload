# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

## 8.0.4 - 2018-11-15

* Don't try to get the device type arch with --dontCheckArch [Alexis Svinartchouk]

## 8.0.3 - 2018-11-13

* The splash image is named resin-logo.png [Alexis Svinartchouk]

## 8.0.2 - 2018-11-13

* Don't try to pin releases when supervisor is < 7.0.0 [Alexis Svinartchouk]

## 8.0.1 - 2018-11-08

* Bind mount host's /dev to container's /dev [Alexis Svinartchouk]

## v8.0.0 - 2018-10-29

* Rename to balena-preload [Alexis Svinartchouk]

## v7.0.6 - 2018-10-29

* Don't build the Dockerfile on CI [Alexis Svinartchouk]

## v7.0.5 - 2018-09-06

* Filter out serviceId for supervisors < 7 [Alexis Svinartchouk]

## v7.0.4 - 2018-08-31

* Get the release ID not the application ID [Theodor Gherzan]

## v7.0.3 - 2018-08-29

* Use localhost instead of 0.0.0.0 to connect to Docker on win32 [Alexis Svinartchouk]

## v7.0.2 - 2018-08-28

* Preload.py: Flush output buffer when data's ready #183 [Gergely Imreh]
* Dockerfile: Do not rely on script being executable #183 [Gergely Imreh]

## v7.0.1 - 2018-08-21

* Pinning information should also be available for the resin-image-flasher #182 [Theodor Gherzan]

## v7.0.0 - 2018-08-20

* Check device architecture instead of device type #181 [Alexis Svinartchouk]

## v6.3.2 - 2018-08-09

* In the case of a flasher OS copy splash image to its boot partition #178 [Theodor Gherzan]

## v6.3.1 - 2018-05-30

* Increase size multiplier from 1.1 to 1.4 #177 [Alexis Svinartchouk]

## v6.3.0 - 2018-05-30

* Add circleci auto-deploy to npm #175 [Cameron Diver]
* Allow devices to be pinned following a preload provision #175 [Cameron Diver]

## v6.2.0 - 2018-03-23

* Update resin-sdk to 9.0.0-beta16, use $ before expand #171 [Alexis Svinartchouk]

## v6.1.2 - 2018-03-20

* Add appId to each app in apps.json for supertvisors < 7 (apps.json is from state v1) #169 [Alexis Svinartchouk]

## v6.1.1 - 2018-03-19

* Fix preloading images with supervisor version < 7 #167 [Alexis Svinartchouk]

## v6.1.0 - 2018-03-19

* Preload the release with the highest id if an app has no commit specified. #165 [Alexis Svinartchouk]
* Use state v1 endpoint when the supervisor version is < 7 #165 [Alexis Svinartchouk]
* Fix specifying commit #165 [Alexis Svinartchouk]

## v6.0.0 - 2018-03-09

* Multicontainer preload #155 [Alexis Svinartchouk]

## v5.2.2 - 2018-02-28

* Get_inner_image_path falls back to the first file in /opt if no deviceType.json file is found. #163 [Alexis Svinartchouk]

## v5.2.1 - 2018-02-22

* Get the inner image name from device_type.json #161 [Alexis Svinartchouk]

## v5.2.0 - 2018-02-06

* Preserve bootstrap code in MBR when resizing #158 [Alexis Svinartchouk]

## v5.1.2 - 2018-01-12

* Bind mount /dev on linux hosts #153 [Alexis Svinartchouk]

## v5.1.1 - 2017-12-12

* Remove all references to --dont-detect-flasher-type-images #151 [Alexis Svinartchouk]
* Minor fixes in preload.py #151 [Alexis Svinartchouk]

## v5.1.0 - 2017-12-12

* Preload images that use Balena instead of Docker #149 [Alexis Svinartchouk]

## v5.0.4 - 2017-11-17

* Wait for loop device to be detached before killing the container #147 [Alexis Svinartchouk]

## v5.0.3 - 2017-11-16

* Fix confusion between bytes and sectors on partition resize #145 [Alexis Svinartchouk]

## v5.0.2 - 2017-11-16

* Fix filesystem expansion after resize #143 [Alexis Svinartchouk]

## v5.0.1 - 2017-11-08

* Update README: docker-toolbox is not supported, aufs module is required. #141 [Alexis Svinartchouk]

## v5.0.0 - 2017-10-26

* Preload GPT disk images, remove --dont-detect-flasher-type-images option #138 [Alexis Svinartchouk]

## v4.0.9 - 2017-10-25

* Don't set Preloader.imageRepo in setApplication. #137 [Alexis Svinartchouk]

## v4.0.8 - 2017-10-24

* Fix incompatibility with Docker 1.12.6 (api version 1.24) #135 [Alexis Svinartchouk]

## v4.0.7 - 2017-10-24

* Fix the --dont-detect-flasher-type-images option. #133 [Alexis Svinartchouk]

## v4.0.6 - 2017-10-20

* Copy data between the MBR and the first partition when resizing a preloader image. #128 [Alexis Svinartchouk]

## v4.0.5 - 2017-10-20

* Don't crash if data/docker/network/files/local-kv.db doesn't exist #130 [Alexis Svinartchouk]

## v4.0.4 - 2017-10-18

* Fix preloading edison images 2.6+ (root partition filename changed) #126 [Alexis Svinartchouk]
* Support preloading 2.6+ resinOS images when hostapps use aufs or overlay2 #126 [Alexis Svinartchouk]
* Print a newline after each spinner #126 [Alexis Svinartchouk]

## v4.0.3 - 2017-10-18

* Fix the logic that defines where we get R_OK and W_OK constants for node 4 support #125 [Pablo Carranza Velez]

## v4.0.2 - 2017-10-16

* Get R_OK and W_OK constants from wherever they're available, to keep supporting node v4 for the time being #124 [Pablo Carranza Velez]

## v4.0.1 - 2017-10-13

* Handle cases where we are not redirected when making a request to the registry. #122 [Alexis Svinartchouk]

## v4.0.0 - 2017-10-13

* Allow preloading of Edison zip archives. #117 [Alexis Svinartchouk]

## v3.1.9 - 2017-10-06

* Don't use Array.includes, it is not supported in node4. #119 [Alexis Svinartchouk]

## v3.1.8 - 2017-09-28

* Use Docker bridged networking on platforms other than Linux. #111 [Alexis Svinartchouk]

## v3.1.7 - 2017-09-05

* Don't use docker's PortBindings as we run it with `--net=host` #108 [Alexis Svinartchouk]

## v3.1.6 - 2017-08-31

* Detect when the overlay module is not loaded and show an appropriate error. #105 [Alexis Svinartchouk]

## v3.1.5 - 2017-08-30

* The python script no longer pulls the build, instead it exposes dockerd to the js script. This allows us to have a progress bar for the docker pull. #102 [Alexis Svinartchouk]

## v3.1.4 - 2017-08-25

* Use the docker storage driver from /<rootfs>/lib/systemd/system/docker.service ExecStart key. #96 [Alexis Svinartchouk]

## v3.1.3 - 2017-08-25

* Fix js style (standard js) #100 [Alexis Svinartchouk]

## v3.1.2 - 2017-08-25

* Add flag for ignoring mismatching device types [Sven Schwermer]

## v3.1.1 - 2017-08-24

* Add a files section to package.json. #99 [Alexis Svinartchouk]

## v3.1.0 - 2017-08-22

* Add progress bars and spinners. #95 [Alexis Svinartchouk]

## v3.0.0 - 2017-08-21

* Don't preload the same build twice. #87 [Alexis Svinartchouk]

## v2.0.3 - 2017-08-21

* Don't call stdin.setRawMode if it doesn't exist. #93 [Alexis Svinartchouk]

## v2.0.2 - 2017-08-18

* Use only lower case for the preloaded image repository. #91 [Alexis Svinartchouk]

## v2.0.1 - 2017-08-16

* Correctly set the resin api token. #85 [Alexis Svinartchouk]

## v2.0.0 - 2017-08-11

* Integrate with resin-cli #81 [Alexis Svinartchouk]

## v1.4.1 - 2017-08-09

* Use --net=host for host's Docker. #83 [Alexis Svinartchouk]

## v1.4.0 - 2017-08-04

* Allow relative paths for the --image parameter. [Alexis Svinartchouk]

## v1.3.1 - 2017-08-04

* Update the README about --dont-detect-flasher-type-images [Alexis Svinartchouk]

## v1.3.0 - 2017-08-04

* Add a --dont-detect-flasher-type-images flag. [Alexis Svinartchouk]

## v1.2.2 - 2017-08-04

* Use standardJS [Alexis Svinartchouk]

## v1.2.1 - 2017-07-27

* Add CHANGELOG to allow VersionBot commits. [Alexis Svinartchouk]

## v1.2.0 - 2017-07-25

* Allow specifying an app commit to preload. [Alexis Svinartchouk]
